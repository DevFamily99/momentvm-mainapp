# frozen_string_literal: true

# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rails db:seed command (or created alongside the database with db:setup).
#
# Examples:
#
#   movies = Movie.create([{ name: 'Star Wars' }, { name: 'Lord of the Rings' }])
#   Character.create(name: 'Luke', movie: movies.first)

# admin = User.new(
#   name: "admin",
#   password: "admin"
# )
# puts "Saving successful: #{admin.save}"
# Doenst work

# Loads existing countries from settings
abort('The Rails environment is running in production mode!') if Rails.env.production?
puts 'running seeds.rb'

unless Team.first
  plan = Plan.create(name: 'basic', country_limit: 10)
  team = Team.create!(plan_id: plan.id, owner_firstname: 'Owner firstname', owner_lastname: 'Owner lastname', owner_email: 'teamowner@example.com', name: 'Team name', show_setup_assistant: false, approved: true, preview_wrapper_url: 'https://momentvm-tech-prtnr-na05-dw.demandware.net/s/RefArch/home?lang=en_US', selector: '#maincontent', client_id: Rails.application.credentials.dig(ENV['CURRENT_INSTANCE']&.to_sym || :local, :mainapp, :momentvm_client_id), client_secret: Rails.application.credentials.dig(ENV['CURRENT_INSTANCE']&.to_sym || :local, :mainapp, :momentvm_secret_key))
  role = Role.create(name: 'Admin', team_id: team.id, body: { can_create_pages: 'yes', can_edit_pages: 'no', can_edit_all_modules_by_default: 'yes', can_edit_settings: 'yes' })
  role2 = Role.create(name: 'User', team_id: team.id, body: { can_create_pages: 'no', can_edit_pages: 'no' })
  user = User.create(email: 'testuser@example.com', password: '123456', password_confirmation: '123456', team_id: team.id, allowed_countries: '["ar","ar-AE","ar-QA","da","da-DK","de","de-AT","de-CH","de-DE","de-LU","en","en-AL","en-AM","en-AU","en-AZ","en-BA","en-BG","en-BN","en-BY","en-CA","en-CY","en-CZ","en-EE","en-EG","en-FI","en-GB","en-GE","en-GR","en-HK","en-HR","en-HU","en-ID","en-IE","en-IL","en-IN","en-IR","en-IS","en-KZ","en-LT","en-LV","en-MD","en-MT","en-MY","en-NZ","en-PH","en-PT","en-QA","en-RO","en-RS","en-SA","en-SG","en-SI","en-SK","en-TH","en-TR","en-UA","en-US","en-ZA","es","es-AR","es-CL","es-CO","es-CR","es-ES","es-MX","es-PA","es-PE","es-PR","es-US","fr","fr-BE","fr-CA","fr-CH","fr-FR","fr-LU","it","it-CH","it-IT","it-SM","ja","ja-JP","ko","ko-KR","nl","nl-BE","nl-NL","no","no-NO","no-UA","pl","pl-PL","pt","pt-BR","ru","ru-BY","ru-KZ","ru-RU","ru-UA","sv","sv-SE","tr","tr-TR","zh","zh-CN","zh-HK","zh-TW"]')
  user2 = User.create(email: 'user@example.com', password: '123456', password_confirmation: '123456', team_id: team.id)

  PublishingTarget.create(name: 'momentvmSandbox', publishing_url: 'https://momentvm-tech-prtnr-na05-dw.demandware.net', default_library: 'RefArchSharedLibrary', team: team)

  site = Site.create(name: 'RefArchGlobal', salesforce_id: 'RefArchGlobal', team: team)
  Locale.create(site: site, name: 'English (United Kingdom)', code: 'en-GB', display_name: 'English (United Kingdom)', display_country: 'United Kingdom', display_language: 'English')
  cg = CountryGroup.create(name: 'test', team: team)
  cg.sites << site
  PageContext.create(team: team, name: 'Content Asset', slot: 'home-main-m', context: 'global')

  Setting.create(team_id: 1, name: 'countries', body: "---\r\nsites:\r\n- name: Qatar\r\n  locales:\r\n  - locale: ar\r\n    name: Arabic\r\n  - locale: en\r\n    name: English\r\n  id: QA\r\n- name: United Arab Emirates\r\n  locales:\r\n  - locale: ar\r\n    name: Arabic\r\n  id: AE\r\n- name: China\r\n  locales:\r\n  - locale: zh\r\n    name: Chinese\r\n  id: CN\r\n- name: Hong Kong\r\n  locales:\r\n  - locale: zh\r\n    name: Chinese\r\n  - locale: en\r\n    name: English\r\n  id: HK\r\n- name: Taiwan\r\n  locales:\r\n  - locale: zh\r\n    name: Chinese\r\n  id: TW\r\n- name: Denmark\r\n  locales:\r\n  - locale: da\r\n    name: Danish\r\n  id: DK\r\n- name: Belgium\r\n  locales:\r\n  - locale: nl\r\n    name: Dutch\r\n  - locale: fr\r\n    name: French\r\n  id: BE\r\n- name: Netherlands\r\n  locales:\r\n  - locale: nl\r\n    name: Dutch\r\n  id: NL\r\n- name: Albania\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: AL\r\n- name: Armenia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: AM\r\n- name: Australia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: AU\r\n- name: Azerbaijan\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: AZ\r\n- name: Belarus\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: ru\r\n    name: Russian\r\n  id: BY\r\n- name: Bosnia and Herzegovina\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: BA\r\n- name: Brunei\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: BN\r\n- name: Bulgaria\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: BG\r\n- name: Canada\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: fr\r\n    name: French\r\n  id: CA\r\n- name: Croatia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: HR\r\n- name: Cyprus\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: CY\r\n- name: Czech Republic\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: CZ\r\n- name: Egypt\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: EG\r\n- name: Estonia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: EE\r\n- name: Finland\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: FI\r\n- name: Georgia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: GE\r\n- name: Greece\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: GR\r\n- name: Hungary\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: HU\r\n- name: Iceland\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: IS\r\n- name: India\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: IN\r\n- name: Indonesia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: ID\r\n- name: Iran\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: IR\r\n- name: Ireland\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: IE\r\n- name: Israel\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: IL\r\n- name: Kazakhstan\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: ru\r\n    name: Russian\r\n  id: KZ\r\n- name: Latvia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: LV\r\n- name: Lithuania\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: LT\r\n- name: Malaysia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: MY\r\n- name: Malta\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: MT\r\n- name: Moldova\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: MD\r\n- name: New Zealand\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: NZ\r\n- name: Philippines\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: PH\r\n- name: Portugal\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: PT\r\n- name: Romania\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: RO\r\n- name: Saudi Arabia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: SA\r\n- name: Serbia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: RS\r\n- name: Singapore\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: SG\r\n- name: Slovakia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: SK\r\n- name: Slovenia\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: SI\r\n- name: South Africa\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: ZA\r\n- name: Thailand\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: TH\r\n- name: Turkey\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: tr\r\n    name: Turkish\r\n  id: TR\r\n- name: Ukraine\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: 'no'\r\n    name: Norwegian\r\n  - locale: ru\r\n    name: Russian\r\n  id: UA\r\n- name: United Kingdom\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  id: GB\r\n- name: United States\r\n  locales:\r\n  - locale: en\r\n    name: English\r\n  - locale: es\r\n    name: Spanish\r\n  id: US\r\n- name: France\r\n  locales:\r\n  - locale: fr\r\n    name: French\r\n  id: FR\r\n- name: Luxembourg\r\n  locales:\r\n  - locale: fr\r\n    name: French\r\n  - locale: de\r\n    name: German\r\n  id: LU\r\n- name: Switzerland\r\n  locales:\r\n  - locale: fr\r\n    name: French\r\n  - locale: de\r\n    name: German\r\n  - locale: it\r\n    name: Italian\r\n  id: CH\r\n- name: Austria\r\n  locales:\r\n  - locale: de\r\n    name: German\r\n  id: AT\r\n- name: Germany\r\n  locales:\r\n  - locale: de\r\n    name: German\r\n  id: DE\r\n- name: Italy\r\n  locales:\r\n  - locale: it\r\n    name: Italian\r\n  id: IT\r\n- name: San Marino\r\n  locales:\r\n  - locale: it\r\n    name: Italian\r\n  id: SM\r\n- name: Japan\r\n  locales:\r\n  - locale: ja\r\n    name: Japanese\r\n  id: JP\r\n- name: South Korea\r\n  locales:\r\n  - locale: ko\r\n    name: Korean\r\n  id: KR\r\n- name: Norway\r\n  locales:\r\n  - locale: 'no'\r\n    name: Norwegian\r\n  id: 'NO'\r\n- name: Poland\r\n  locales:\r\n  - locale: pl\r\n    name: Polish\r\n  id: PL\r\n- name: Brazil\r\n  locales:\r\n  - locale: pt\r\n    name: Portuguese\r\n  id: BR\r\n- name: Russia\r\n  locales:\r\n  - locale: ru\r\n    name: Russian\r\n  id: RU\r\n- name: Argentina\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: AR\r\n- name: Chile\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: CL\r\n- name: Colombia\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: CO\r\n- name: Costa Rica\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: CR\r\n- name: Mexico\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: MX\r\n- name: Panama\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: PA\r\n- name: Peru\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: PE\r\n- name: Puerto Rico\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: PR\r\n- name: Spain\r\n  locales:\r\n  - locale: es\r\n    name: Spanish\r\n  id: ES\r\n- name: Sweden\r\n  locales:\r\n  - locale: sv\r\n    name: Swedish\r\n  id: SE\r\n\r\n")
  rootFolder = PageFolder.new(name: team.name, team_id: team.id)
  rootFolder.save!
  PageFolder.new(name: 'Archive', team_id: team.id, page_folder_id: rootFolder.id).save!
  AssetFolder.new(name: 'Images', team_id: team.id).save!

  role.users << user
  role.save
  role2.users << user2
  role2.save

  template1 = Template.create(name: 'PEP_video', team_id: team.id, body: "<section class=\"sk-component sk-component--pep-video\" #if(module_unique_id){id=\"#(module_unique_id)\"}>\r\n \r\n    <div class=\"sk-video-wrapper\">\r\n      <div class=\"sk-video-overlay\"></div>\r\n      <span class=\"sk-video-closing\">X</span>\r\n       <iframe width=\"100%\" height=\"100%\" src=\"#(video.video_youtube_url)?rel=0&fs=1\" frameborder=\"0\" allowfullscreen id=\"#(video.video_unique_id)\"></iframe>\r\n\t</div>\r\n    \r\n    <picture class=\"sk-image\">\r\n      \r\n                                   \r\n     <source media=\"(min-width: 1000px)\" srcset=\"#if(image.image_name != \"\"){dynamicimage::pdpFullScreen:#(image.image_name)::}else{https://via.placeholder.com/1450x700?text=Image}\" data-sk-viewport=\"desktop\">  \r\n     <source media=\"(min-width: 500px)\" srcset=\"#if(image.image_name != \"\"){dynamicimage::legacy-tablet:#(image.image_name)::}else{https://via.placeholder.com/1450x700?text=Image}\" data-sk-viewport=\"mobile-large\">\r\n      <source media=\"(min-width: 0px)\" srcset=\"#if(image.image_name != \"\"){dynamicimage::legacy-mobile:#(image.image_name)::}else{https://via.placeholder.com/1450x700?text=Image}\" data-sk-viewport=\"mobile\">\r\n    \t\r\n      \r\n       <img #if(image.image_unique_id){id=\"#(image.image_unique_id)\"} class=\"sk-image__img\" src=\"#if(image.image_name != \"\"){dynamicimage::legacy:#(image.image_name)::}else{https://via.placeholder.com/1450x700?text=Image}\" alt=\"#(image.image_alt_text)\" />\r\n     </picture>\r\n  \t\r\n  \t <div class=\"sk-video-text-wrapper\">\r\n    <h3 class=\"sk-copy-large\">#(video.video_text_overlay)</h3>\r\n     <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"37\" height=\"37\" viewBox=\"0 0 37 37\">\r\n                    <g fill=\"none\" fill-rule=\"evenodd\">\r\n                       <circle cx=\"18.5\" cy=\"18.5\" r=\"18.5\" fill=\"#ED7703\"/>\r\n                       <path stroke=\"#FFF\" d=\"M15.0060271,10.2479916 L26.521239,17.5823621 C27.159587,18.0481891 27.159587,18.9516736 26.521239,19.4175006 L15.0060271,26.751871 C14.1901156,27.3475525 13,26.8034006 13,25.8346453 L13,11.1659044 C13,10.1971491 14.1901156,9.65231017 15.0060271,10.2479916 Z\"/>\r\n                    </g>\r\n                 </svg>\r\n \t </div>\r\n\r\n</section>\r\n<style>\r\n\r\n.sk-component--pep-video {\r\n\tposition: relative;\r\n    max-width:1920px;\r\n    margin:0 auto;\r\n}\r\n\r\n.sk-component--pep-video .sk-video-text-wrapper h3 {\r\n\tcolor: #fff;\r\n}\r\n.sk-component--pep-video .sk-video-text-wrapper svg{\r\n    width: 50px;\r\n    height: 50px;\r\n    top: 2%;\r\n    position: relative;\r\n}\r\n\r\n.sk-component--pep-video .sk-video-text-wrapper {\r\n\tposition: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0,0,0, 0.2);\r\n    top: 0;\r\n    justify-content: center;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.sk-component--pep-video .sk-video-wrapper {\r\n    position: fixed;\r\n    height: 50%;\r\n    width: 100%;\r\n    z-index: 100;\r\n    top: 0;\r\n    display:none;\r\n}\r\n.sk-component--pep-video .sk-video-wrapper .sk-video-overlay{\r\n    position: fixed;\r\n    background: #000;\r\n    width: 100%;\r\n    height: 100%;\r\n    opacity: 0.7;\r\n}\r\n\r\n.sk-component--pep-video .sk-video-wrapper .sk-video-closing {\r\n    position: absolute;\r\n    color: #fff;\r\n    font-size: 25px;\r\n    right: 10%;\r\n    top: 10%;\r\n    cursor: pointer;\r\n    z-index:10;\r\n}\r\n\r\n.sk-component--pep-video .sk-image__img {width:100%;}\r\n.sk-component--pep-video .sk-video-wrapper iframe {\r\n\twidth: 950px;\r\n    height: 535px;\r\n    left: 0;\r\n    right: 0;\r\n    margin: auto;\r\n    position:absolute;\r\n    top:0;\r\n    bottom:0;\r\n}\r\n\r\n @media only screen and (max-width: 799px) {\r\n \t.sk-component--pep-video .sk-video-text-wrapper h3 { \r\n        text-align:center;\r\n        width:80%;\r\n    \r\n    }\r\n\t.sk-component--pep-video .sk-video-wrapper iframe {\r\n    \theight:50%;\r\n        width:100%;\r\n    }\r\n    \r\n    .sk-component--pep-video .sk-video-wrapper {\r\n    \theight:100%;\r\n    }\r\n }   \r\n\r\n @media only screen and (min-width: 800px) and (max-width: 1112px) {\r\n\r\n      \r\n      \r\n      .sk-component--pep-video .sk-video-wrapper iframe {\r\n      \twidth:800px;\r\n        height:450px;\r\n      }\r\n      \r\n     .sk-component--pep-video .sk-video-wrapper .sk-video-closing {\r\n      \ttop:5%;\r\n        right:5%;\r\n      }\r\n }\r\n \r\n</style>\r\n <script>\r\n    document.addEventListener(\"DOMContentLoaded\", function(event) {\r\n      var videoWrappers = document.querySelectorAll(\".sk-component--pep-video\");\r\n      for (item of videoWrappers) {\r\n        item.addEventListener('click', function (event) {\r\n          var moduleWrapper = event.target.closest(\".cms-page-module\");\r\n          var iframe = moduleWrapper.querySelector(\"iframe\")\r\n          if (event.target.className == \"sk-video-closing\") {\r\n            // clicked X button\r\n            var moduleWrapper = event.target.closest(\".cms-page-module\");\r\n            moduleWrapper.querySelector(\".sk-video-wrapper\").style.display = \"none\"\r\n            iframe.src = iframe.src.replace(\"&autoplay\", \"\");\r\n            return\r\n          } else {\r\n            // Show video\r\n            iframe.src = iframe.src + \"&autoplay=1\";\r\n            moduleWrapper.querySelector(\".sk-video-wrapper\").style.display = \"block\"\r\n          }\r\n        })\r\n      }\r\n    });\r\n    </script>")
  template2 = Template.create(name: 'Home_Page_Campaign', team_id: team.id, body: "<div class=\"sk-component sk-component--copy-and-image campaign-panel\" #if(module_unique_id){id=\"#(module_unique_id)\"} style=\"background-color:#if(background_color == white){#fff;}#if(background_color == grey){#f5f5f5;}\">\r\n    <div class=\"sk-content-column\">\r\n        <div class=\"sk-copy-and-image sk-copy-and-image--image-#(image_on_the)\">\r\n            <div class=\"sk-container-outer\">\r\n                 <div class=\"sk-container-inner\">\r\n                    <div class=\"sk-copy-and-image__copy\">\r\n                        <div class=\"sk-copy-header\">\r\n                            <div class=\"sk-pre-header\">#(small_headline_text)</div>\r\n                            <h2 class=\"sk-copy-header__heading\">#(large_headline_text)</h2>\r\n                        </div>\r\n\r\n                        <div class=\"sk-copy sk-copy--large\">\r\n                            <p>#(paragraph_text)</p>\r\n                        </div>\r\n\r\n#if(button_text){\r\n\r\n                               <a id=\"#(button_unique_id)\" href=\"#if(link.category_id){$url('Search-Show','cgid','#(link.category_id)'#if(link.product_listing_page == true){,'forcelisting', '#(link.product_listing_page)'})$}#if(link.product_id){$url('Product-Show','pid','#(link.product_id)')$}#if(link.variation){$url('StokkeConfigurator-Show','cid','#(link.configurator_content_asset_id)')$}#if(link.content_asset_id){$url('Page-Show','cid','#(link.content_asset_id)')$}#if(link.url){#(link.url)}\" #if(link.url){target=\"_blank\"} class=\"sk-button sk-button--invert\">#(button_text)</a>\r\n\r\n                         #if(award_image != \"\"){\r\n                          <img class=\"award\" src=\"dynamicimage::legacy:#(award_image)::\" alt=\"#(award_alt_text)\" />\r\n                        }\r\n}\r\n                    </div>\r\n                   \r\n                          #if(video.video_url != \"\"){\r\n                     \t<div class=\"sk-product-video-wrapper\">\r\n                          \r\n                        <div class=\"sk-video-overlay\">\r\n                          #if(video.video_text){\r\n                            <h3 class=\"sk-copy-large\">#(video.video_text)</h3>\r\n                          }\r\n                               <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"37\" height=\"37\" viewBox=\"0 0 37 37\">\r\n                    <g fill=\"none\" fill-rule=\"evenodd\">\r\n                       <circle cx=\"18.5\" cy=\"18.5\" r=\"18.5\" fill=\"#ED7703\"/>\r\n                       <path stroke=\"#FFF\" d=\"M15.0060271,10.2479916 L26.521239,17.5823621 C27.159587,18.0481891 27.159587,18.9516736 26.521239,19.4175006 L15.0060271,26.751871 C14.1901156,27.3475525 13,26.8034006 13,25.8346453 L13,11.1659044 C13,10.1971491 14.1901156,9.65231017 15.0060271,10.2479916 Z\"/>\r\n                    </g>\r\n                 </svg>\r\n                             \r\n                             </div>\r\n                          \t\t\r\n                           <picture class=\"sk-image video-placeholder-image\">\r\n                            \r\n                     \r\n     <source media=\"(min-width: 1000px)\" srcset=\"#if(video.image != \"\"){dynamicimage:homepagecampaign:#(video.image)::}else{https://via.placeholder.com/992x600?text=Video Image}\" data-sk-viewport=\"desktop\">  \r\n     <source media=\"(min-width: 500px)\" srcset=\"#if(video.image != \"\"){dynamicimage:homepagecampaign_low:#(video.image)::}else{https://via.placeholder.com/992x600?text=Video Image}\" data-sk-viewport=\"mobile-large\">\r\n      <source media=\"(min-width: 0px)\" srcset=\"#if(video.image != \"\"){dynamicimage:homepagecampaign_low:#(video.image)::}else{https://via.placeholder.com/992x600?text=Video Image}\" data-sk-viewport=\"mobile\">\r\n    \t\t\t      \t\r\n       \t\t\t\t\t\t\r\n                             <img #if(video.image_unique_id){id=\"#(video.image_unique_id)\"} class=\"sk-image__img\" src=\"#if(video.image != \"\"){dynamicimage:homepagecampaign_low::#(video.image)::}else{https://via.placeholder.com/992x600?text=Video Image}\" alt=\"#(video.image_alt_text)\" />\r\n     \t\t\t\t\t\r\n                          </picture>\r\n                       \t\t<iframe width=\"960\" height=\"540\" src=\"#(video.video_url)?rel=0&amp;showinfo=0;autoplay=0&#if(video.video_muted == yes){mute=1};\" frameborder=\"0\" allowfullscreen=\"\" id=\"#(video.video_unique_id)\"></iframe>\r\n                   \t\r\n                          \t   \r\n                   \r\n                   \r\n                   </div>\r\n                       }\r\n                   \r\n                   \r\n                      #if(video.video_url == \"\"){\r\n                     <a class=\"sk-copy-and-image__image-link\" style=\"border:none;\" href=\"#if(link.category_id){$url('Search-Show','cgid','#(link.category_id)'#if(link.product_listing_page == true){,'forcelisting','#(link.product_listing_page)'})$}#if(link.product_id){$url('Product-Show','pid','#(link.product_id)')$}#if(link.variation){$url('StokkeConfigurator-Show','cid','#(link.configurator_content_asset_id)')$}#if(link.content_asset_id){$url('Page-Show','cid','#(link.content_asset_id)')$}#if(link.url){#(link.url)}\" #if(link.url){target=\"_blank\"}>\r\n<div id=\"#(image_unique_id)\" class=\"sk-copy-and-image__image\" style=\"background-image: url(#if(image != \"\"){dynamicimage::homepagecampaign_low:#(image)::}else{https://via.placeholder.com/1140x500?text=Image});\" alt=\"#(image_alt_text)\"></div></a>\r\n             }\r\n\r\n        \r\n                     #if(stamp_image != \"\"){\r\n                     <div class=\"sk-stamp sk-stamp--top-#(image_on_the)\">\r\n                            <img style=\"max-width:5.6rem\" src=\"dynamicimage::legacy:#(stamp_image)::\" alt=\"#(stamp_alt_text)\">\r\n                      </div>\r\n                     }\r\n                 \r\n           \r\n            </div>\r\n        </div>\r\n     </div>\r\n </div>\r\n </div>\r\n\r\n<script>\r\n  document.addEventListener(\"DOMContentLoaded\", function() {\r\n    \r\n     $( \"##(module_unique_id).campaign-panel .sk-image\" ).click(function(e) {\r\n  \r\n       showCampaignPanelVideo(e);\r\n     });\r\n                                                                  \r\n    \t$( \"##(module_unique_id).campaign-panel .sk-video-overlay\" ).click(function(e) {\r\n\r\n       showCampaignPanelVideo(e);\r\n     });\r\n       \r\n\r\n    function showCampaignPanelVideo(e){\r\n       e.stopImmediatePropagation();\r\n      \tvar video = document.querySelector(\"##(module_unique_id).campaign-panel .sk-product-video-wrapper iframe\");\r\n  \t\tvideo.attributes.src.textContent = video.attributes.src.textContent.replace(\"autoplay=0\", \"autoplay=1\");\r\n       $(\"##(module_unique_id).campaign-panel .video-placeholder-image\").hide();\r\n       $(\"##(module_unique_id).campaign-panel .sk-video-overlay\").hide();\r\n       $(\"##(module_unique_id).campaign-panel iframe\").show();\r\n    \r\n    }\r\n    \r\n\r\n  \r\n  });\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n.campaign-panel  .sk-video-wrapper iframe {\r\n  width:initial;\r\nheight:initial;\r\n}\r\n\r\n.campaign-panel iframe {\r\n\tdisplay:none;\r\n}\r\n\r\n.campaign-panel .sk-product-video-wrapper {\r\n\tposition:relative;\r\n}\r\n\r\n.campaign-panel  .sk-video-overlay {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    background: rgba(0,0,0, 0.2);\r\n    z-index:1;\r\n    justify-content: center;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.campaign-panel .sk-video-overlay h3 {\r\n\tcolor:#ffffff;\r\n}\r\n\r\n.campaign-panel  .sk-product-video-wrapper {\r\n flex: 0 1 72%;\r\n  order: #if(image_on_the == \"right\"){2}#if(image_on_the == \"left\"){1};\r\n}\r\n\r\n.campaign-panel .sk-copy-and-image--image-left .sk-copy-and-image__image-link {\r\norder:1;\r\n}\r\n\r\n.campaign-panel .sk-copy-and-image--image-right .sk-copy-and-image__image-link{\r\norder:2;\r\n}\r\n\r\n\r\n\r\n\r\n.sk-component--copy-and-image.campaign-panel .sk-content-column a.sk-button { color:#000!important;}\r\n\r\n.campaign-panel .sk-copy-and-image__image-link {\r\n flex: 0 1 72%;\r\n}\r\n\r\n@media only screen and (max-width: 776px) {\r\n.campaign-panel .sk-copy-and-image__image-link, .campaign-panel .sk-product-video-wrapper {\r\n  flex: 0 1 100%;\r\n}\r\n\r\n.campaign-panel .sk-product-video-wrapper iframe {\r\n\twidth:100%;\r\n\theight:100%;\r\n}\r\n\r\n\r\n#if(mobile_invisible == true){\r\n\r\n@media only screen and (max-width: 799px) {\r\n    .sk-component sk-component--copy-and-image.campaign-panel { display:none;}\r\n}\r\n\r\n\r\n}\r\n\r\n</style>")
  template3 = Template.create(name: 'paragraph', team_id: team.id, body: "<div class=\"sk-component paragraph\" #if(module_unique_id){id=\"#(module_unique_id)\"}>\r\n    <div class=\"sk-content-column\">\r\n        <div class=\"sk-copy--large\" style=\"text-align:center\">#(paragraph_text)</div>\r\n    </div>\r\n</div>\r\n\r\n")
  templateSchema1 = TemplateSchema.create(template_id: template1.id, team_id: team.id, body: "start_date:\r\n  type: string\r\n  title: Start date\r\n  format: date\r\n  propertyOrder: 1\r\nend_date:\r\n  type: string\r\n  title: End date\r\n  format: date\r\n  propertyOrder: 2\r\nmodule_unique_id:\r\n  type: string\r\n  title: Module unique ID\r\n  propertyOrder: 3\r\nvideo:\r\n  type: object\r\n  title: Video\r\n  properties:\r\n    video_youtube_url:\r\n      type: string\r\n      title: Video Youtube URL\r\n      propertyOrder: 4\r\n    video_text_overlay:\r\n      type: string\r\n      title: Video text\r\n      format: localized\r\n      default: Video text on overlay\r\n    video_unique_id:\r\n      type: string\r\n      title: Video unique id\r\n      propertyOrder: 5     \r\nimage:\r\n  type: object\r\n  title: Image\r\n  properties:\r\n    image_name:\r\n      type: string\r\n      title: Image name\r\n    image_alt_text:\r\n      type: string\r\n      title: Image alternative text\r\n      format: localized  \r\n    image_unique_id:\r\n      type: string\r\n      title: Image unique ID")
  templateSchema2 = TemplateSchema.create(template_id: template2.id, team_id: team.id, body: "start_date:\r\n  type: string\r\n  title: Start date\r\n  format: date\r\n  propertyOrder: 1\r\nend_date:\r\n  type: string\r\n  title: End date\r\n  format: date\r\n  propertyOrder: 2\r\nmodule_unique_id:\r\n  type: string\r\n  title: Module unique ID (required!)\r\n  propertyOrder: 3\r\nimage:\r\n  type: string\r\n  title: Image\r\nimage_alt_text: \r\n  type: string \r\n  title: Image alternative text\r\n  format: localized\r\nimage_on_the:\r\n  type: string\r\n  title: Image on the\r\n  enum: [\"left\",\"right\"]\r\nimage_unique_id:\r\n  type: string\r\n  title: Image unique ID\r\nstamp_image:\r\n  title: Stamp image\r\n  type: string\r\nstamp_alt_tex:\r\n  title: Stamp image alternative text\r\n  type: string\r\n  format: localized  \r\nvideo:\r\n  type: object\r\n  title: Video\r\n  properties:\r\n    video_url:\r\n      type: string\r\n      title: Video URL\r\n      propertyOrder: 7\r\n    video_unique_id:\r\n      type: string\r\n      title: Video unique id\r\n      propertyOrder: 8\r\n    video_muted:\r\n      type: string\r\n      title: Video muted\r\n      enum: [\"yes\",\"no\"]\r\n      propertyOrder: 9\r\n    video_text:\r\n      type: string\r\n      title: Video Text\r\n      format: localized\r\n      propertyOrder: 9\r\n    image:\r\n      type: string\r\n      title: Video image\r\n      propertyOrder: 9\r\n    image_unique_id:\r\n      type: string\r\n      title: Video image unique ID\r\n      propertyOrder: 9\r\nbutton_text:\r\n  title: Button text\r\n  type: string\r\n  format: localized\r\n  default: Button text\r\nlink:\r\n    oneOf:\r\n    - \r\n      title: \"category\"\r\n      properties:\r\n        category_id:\r\n          type: string\r\n        product_listing_page:\r\n          type: string\r\n          enum: [\"false\", \"true\"]\r\n      additionalProperties: false\r\n    - \r\n      title: \"content asset\"\r\n      properties:\r\n        content_asset_id:\r\n          type: string\r\n          format: localized\r\n      additionalProperties: false\r\n    - \r\n      title: \"product\"\r\n      properties:\r\n        product_id:\r\n          type: string\r\n          format: localized\r\n      additionalProperties: false\r\n    - \r\n      title: \"configurator\"\r\n      properties:\r\n        configurator_content_asset_id:\r\n          type: string\r\n      additionalProperties: false\r\n    - \r\n      title: \"url\"\r\n      properties:\r\n        url:\r\n          type: string\r\n      additionalProperties: false\r\nbutton_unique_id:\r\n  type: string\r\n  title: Button unique ID\r\nparagraph_text:\r\n  type: string\r\n  format: localized\r\n  default: Paragraph text\r\nsmall_headline_text:\r\n  type: string\r\n  format: localized\r\n  default: Small headline text\r\nlarge_headline_text:\r\n  type: string\r\n  format: localized\r\n  default: Large headline text\r\naward_image:\r\n  type: string\r\naward_alt_text:\r\n  type: string\r\n  format: localized\r\nbackground_color:\r\n  type: string\r\n  title: Background color\r\n  enum: [\"white\",\"grey\"]\r\nmobile_invisible: \r\n  type: string\r\n  enum: [\"false\", \"true\"] \r\n")
  templateSchema3 = TemplateSchema.create(template_id: template3.id, team_id: team.id, body: "start_date:\r\n  type: string\r\n  title: Start date\r\n  format: date\r\n  propertyOrder: 1\r\nend_date:\r\n  type: string\r\n  title: End date\r\n  format: date\r\n  propertyOrder: 2\r\nmodule_unique_id:\r\n  type: string\r\n  title: Module unique ID\r\n  propertyOrder: 3\r\nparagraph_text:\r\n  type: string\r\n  format: localized\r\n  title: Paragraph text\r\n  default: Paragraph text\r\nmobile_invisible: \r\n  type: string\r\n  title: Mobile invisible\r\n  enum: [\"false\", \"true\"] ")

  page = Page.create(context_type: 'content asset', name: 'Test page', locales_black_list: '', is_searchable: true, team_id: team.id)
  page2 = Page.create(context_type: 'content asset', name: 'Test page2', locales_black_list: '', is_searchable: true, team_id: team.id)

  PublishingLocale.create(page_id: 1, locale: 'NL', name: 'Netherlands')
  PublishingLocale.create(page_id: 2, locale: 'NL', name: 'Netherlands')

  pageModule1 = PageModule.create(template_id: template1.id, rank: 'aaaaa', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nvideo:\n  video_youtube_url: https://www.youtube.com/embed?v=HPVOQvIQNDQ\n  video_text_overlay: ''\n  video_unique_id: ''\nimage:\n  image_name: ''\n  image_alt_text: ''\n  image_unique_id: ''\n")
  pageModule2 = PageModule.create(template_id: template2.id, rank: 'aaaab', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nimage: ''\nimage_alt_text: ''\nimage_on_the: ''\nimage_unique_id: ''\nstamp_image: ''\nstamp_alt_tex: ''\nvideo:\n  video_url: ''\n  video_unique_id: ''\n  video_muted: 'yes'\n  video_text: ''\n  image: ''\n  image_unique_id: ''\nbutton_text: Button text\nlink:\n  category_id: ''\n  product_listing_page: 'false'\nbutton_unique_id: ''\nparagraph_text: Paragraph text\nsmall_headline_text: Small headline text\nlarge_headline_text: Large headline text\naward_image: ''\naward_alt_text: ''\nbackground_color: white\nmobile_invisible: 'false'\n")
  pageModule3 = PageModule.create(template_id: template3.id, rank: 'aaaaaz', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nparagraph_text: Paragraph text\nmobile_invisible: 'false'\n")
  page.page_modules << pageModule1
  page.page_modules << pageModule2
  page.page_modules << pageModule3
  page.save

  pageModule11 = PageModule.create(template_id: template1.id, rank: 'aaaaa', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nvideo:\n  video_youtube_url: https://www.youtube.com/embed?v=HPVOQvIQNDQ\n  video_text_overlay: ''\n  video_unique_id: ''\nimage:\n  image_name: ''\n  image_alt_text: ''\n  image_unique_id: ''\n")
  pageModule22 = PageModule.create(template_id: template2.id, rank: 'aaaab', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nimage: ''\nimage_alt_text: ''\nimage_on_the: ''\nimage_unique_id: ''\nstamp_image: ''\nstamp_alt_tex: ''\nvideo:\n  video_url: ''\n  video_unique_id: ''\n  video_muted: 'yes'\n  video_text: ''\n  image: ''\n  image_unique_id: ''\nbutton_text: Button text\nlink:\n  category_id: ''\n  product_listing_page: 'false'\nbutton_unique_id: ''\nparagraph_text: Paragraph text\nsmall_headline_text: Small headline text\nlarge_headline_text: Large headline text\naward_image: ''\naward_alt_text: ''\nbackground_color: white\nmobile_invisible: 'false'\n")
  pageModule33 = PageModule.create(template_id: template3.id, rank: 'aaaaaz', body: "---\nstart_date: ''\nend_date: ''\nmodule_unique_id: ''\nparagraph_text: Paragraph text\nmobile_invisible: 'false'\n")
  page2.page_modules << pageModule11
  page2.page_modules << pageModule22
  page2.page_modules << pageModule33
  page2.save
end
